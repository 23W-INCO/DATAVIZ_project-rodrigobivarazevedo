<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horizontal Box and Whisker Plot Example</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div>
        <label for="userInput">Enter User Value:</label>
        <input type="number" id="userInput" step="any" placeholder="User Value">
        <button onclick="updateBoxPlot()">Update Box Plot</button>
        <div id="box-plot"></div>
    </div>
    

    <script>
        // Example data
        var data = {
            "min_value": 2.1,
            "q1": 4.1,
            "median": 4.3,
            "q3": 4.5,
            "max_value": 5.5
        };
        var userInput = 4.2;
    
        // set the dimensions and margins of the graph
        var margin = { top: 10, right: 30, bottom: 30, left: 40 },
            width = 600 - margin.left - margin.right,
            height = 200 - margin.top - margin.bottom;
    
        // append the svg object to the body of the page
        var svg = d3.select("#box-plot")
            .append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
    
        // Initial user input value
        var userInput = 4.2;
    
        // Function to update the box plot with user input
        function updateBoxPlot() {
            // Get the user input value
            userInput = parseFloat(document.getElementById("userInput").value);
    
            // Redraw the box plot
            drawBoxPlot();
        }
    
        // Function to draw the box plot
        function drawBoxPlot() {
            // Compute summary statistics used for the box:
            var q1 = data.q1;
            var median = data.median;
            var q3 = data.q3;
            var interQuantileRange = q3 - q1;
            var min = Math.max(q1 - 1.5 * interQuantileRange, data.min_value);
            var max = Math.min(q3 + 1.5 * interQuantileRange, data.max_value);
    
            // Show the X scale
            var x = d3.scaleLinear()
                .domain([data.min_value, data.max_value])
                .range([0, width]);
            svg.call(d3.axisBottom(x));
    
            // a few features for the box
            var center = height / 2;
            var boxHeight = 50;
            var boxWidth = 400;
    
            // Show the main horizontal line
            svg.selectAll(".main-line").remove();
            svg.append("line")
                .attr("class", "main-line")
                .attr("y1", center)
                .attr("y2", center)
                .attr("x1", x(min))
                .attr("x2", x(max))
                .attr("stroke", "#333"); // Dark gray
    
            // Show the box
            svg.selectAll(".box").remove();
            svg.append("rect")
                .attr("class", "box")
                .attr("y", center - boxHeight / 2)
                .attr("x", x(q1))
                .attr("width", (x(q3) - x(q1)))
                .attr("height", boxHeight)
                .attr("stroke", "#333") // Dark gray
                .style("fill", "#ddd"); // Light gray
    
            // Show median, min, max, and user input vertical lines
            svg.selectAll(".lines").remove();
            svg.selectAll(".lines")
                .data([min, median, max, userInput])
                .enter()
                .append("line")
                .attr("class", "lines")
                .attr("y1", center - boxHeight / 2)
                .attr("y2", center + boxHeight / 2)
                .attr("x1", function (d) { return x(d); })
                .attr("x2", function (d) { return x(d); })
                .attr("stroke", function (d) { return (d === userInput) ? "red" : "#666"; }); // White for user input, Dark gray for others
        }
    
        // Initial box plot
        drawBoxPlot();
    </script>

</body>
</html>
